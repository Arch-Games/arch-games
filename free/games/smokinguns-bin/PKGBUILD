# Maintainer: Emrah Nizam <emrahnzm@gmail.com>
# Contributor: Alexander Tsamutali <astsmtl@yandex.ru>

pkgname=smokinguns-bin
pkgver=1.0
pkgrel=3
pkgdesc='A semi-realistic simulation of the "old west" great atmosphere built on id Tech 3.'
arch=('i686')
url='http://smokin-guns.net'
license=('GPL2' 'custom')
depends=('openal')
makedepends=('nasm' 'openal')
replaces=('westernquake3')
source=("http://downloads.sf.net/smokinguns/sg-$pkgver-svn_r48.tar.bz2"
        "http://ftp.jeuxlinux.fr/files/Smokin_Guns_$pkgver.zip"
        'smokinguns'
        'smokinguns_server'
        "Smokin' Guns.desktop")
md5sums=('f070b20e9d9b8d61b1d646604d4098fd'
         '6e6a980bd057e9241c66b7324729c7b9'
         '496e2fa0ba12c2cf4db388de633525c0'
         '2f79abcae984f8fff6aa8fc54196e953'
         '727df45967bd3827735a088435f21647')
build() {
  cd "$srcdir/stable"
  make || return 1

  cd "$srcdir/Smokin' Guns"
  rm smokinguns.exe
  rm smokinguns.x86
  rm smokinguns_dedicated.x86

  install -d "$pkgdir/usr/share/licenses/smokinguns"
  install -m 644 LICENSE.txt "$pkgdir/usr/share/licenses/smokinguns/LICENSE"
  install -d "$pkgdir/opt/SmokinGuns/baseq3"
  install -m 644 baseq3/* "$pkgdir/opt/SmokinGuns/baseq3"
  install -d "$pkgdir/opt/SmokinGuns/smokinguns"
  install -m 644 smokinguns/* "$pkgdir/opt/SmokinGuns/smokinguns"  
  install -d "$pkgdir/usr/bin"
  install -m 755 "$startdir/smokinguns" "$pkgdir/usr/bin"
  install -m 755 "$startdir/smokinguns_server" "$pkgdir/usr/bin"
  install -d "$pkgdir/usr/share/applications"
  install -m 775 "$startdir/Smokin' Guns.desktop" "$pkgdir/usr/share/applications"
  install -d "$pkgdir/usr/share/pixmaps"
  install -m 644 "$srcdir/Smokin' Guns/sg_48.png" "$pkgdir/usr/share/pixmaps/smokinguns.png"
  install -m 775 "$srcdir/stable/code/install/smokinguns" "$pkgdir/opt/SmokinGuns/smokinguns.x86"
  install -m 775 "$srcdir/stable/code/install/smokinguns_server" "$pkgdir/opt/SmokinGuns/smokinguns_server.x86"
}

# vim:set ts=2 sw=2 et:
