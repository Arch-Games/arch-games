# Contributor: Shahar Weiss <sweiss4@gmx.net>

pkgname=torcs
pkgver=1.3.0
pkgrel=1
pkgdesc="A 3D racing cars simulator using OpenGL"
url="http://torcs.sourceforge.net"
license="GPL"
arch=('i686')
depends=('freeglut' 'libpng' 'freealut' 'libxi' 'libxmu' 'libxrandr')
makedepends=('plib')
source=(http://mesh.dl.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tar.bz2 \
	torcs.desktop torcs.sh)
md5sums=('b1f8f3293e408a33c89791ac1f12b179' '328e419e9f985c3e7b69924fe299330d' '3f2a94755b86d4c2d1eda420d9b5606b')

build() {
  cd $startdir/src/$pkgname-$pkgver
  ./configure --prefix=/opt/torcs --x-includes=/usr/include --x-libraries=/usr/lib 
  make || return 1
  make DESTDIR=$startdir/pkg install datainstall
  install -D -m644 Ticon.png $startdir/pkg/usr/share/pixmaps/torcs.png
  install -D -m644 ../torcs.desktop $startdir/pkg/usr/share/applications/torcs.desktop
  install -D -m755 ../torcs.sh $startdir/pkg/etc/profile.d/torcs.sh
  find ${startdir}/pkg -type d -exec chmod 755 {} \;
}
