# Contributor: rabyte <rabyte__gmail>

pkgname=spring
pkgver=0.79.1
pkgrel=1
pkgdesc="A free 3D game engine for the real-time-strategy (RTS) game Total Annihilation"
url="http://spring.clan-sy.com/"
arch=('i686' 'x86_64')
license=('GPL2')
depends=('openal' 'glew' 'boost' 'devil' 'libvorbis' 'libxcursor')
makedepends=('cmake>=2.6' 'zip')
optdepends=('springlobby: A lobby client that will download maps for you')
source=(http://spring.clan-sy.com/dl/${pkgname}_${pkgver}_src.tar.gz)
md5sums=('5d4f288ee40b72de3f114dfe1624dd1e')

build() {
  cd "$srcdir/spring_$pkgver"

  cmake . -DCMAKE_INSTALL_PREFIX:PATH=/usr -DDATADIR:STRING=share/spring || return 1
  make || return 1
  make DESTDIR="$pkgdir" install

  install -d -m755 "$pkgdir/etc/spring"
  echo '$HOME/.spring' > "$pkgdir/etc/spring/datadir"

  find "$pkgdir" -name '*.so' -exec chmod 644 {} \;
}

# vim:set ts=2 sw=2 et:
