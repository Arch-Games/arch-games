# Contributor: Slash <demodevil5[at]yahoo[dot]com>

pkgname=savage
pkgver=2.00e
pkgrel=6
pkgdesc="Savage: The Battle for Newerth is an online multiplayer team-based FPS/RTS hybrid. Completely free as of September 2006. (Includes SFE Patches)"
url="http://s2games.com/savage"
license=('custom')
arch=('i686')
depends=('libgl' 'sdl' 'glib2' 'mesa' 'libjpeg' 'libpng' 'libidn' 'e2fsprogs' 'curl' 'openssl')
makedepends=('unzip')
install=savage.install
source=(savage.launcher 
		savage.desktop
		icon.xpm
		http://mnky.newerth.com/lin-client-auth-patch.zip
		http://www.notforidiots.com/SFE/SFE-Standalone.tar.gz)
		
md5sums=('1588610be6fe7c52eda37fee65ca16c4' 
		 '1fcb84c031b22b73fd803a6e2a611aca' 
		 'a73f68e3620382860b08e88c1125f55d' 
		 '7fb1e0b31e838ea335a35c769c4549d8' 
		 '3ce0c50e3d5e4ff6789122c5076fb66b')

build() {

	#Install Game
	cd $srcdir
	install -d $pkgdir/opt/savage
    tar zxf $srcdir/SFE-Standalone.tar.gz -C $pkgdir/opt/savage/
    
	#Install Client Auth Patch
    install -m 755 $srcdir/lin-client-auth-patch/silverback.bin $pkgdir/opt/savage/silverback.bin
    install -m 755 $srcdir/lin-client-auth-patch/game/game.so $pkgdir/opt/savage/game/game.so
    install -m 755 $srcdir/lin-client-auth-patch/libs/libpng12.so.0 $pkgdir/opt/savage/libs/libpng12.so.0
    
	#Create Log File
    touch $pkgdir/opt/savage/scripts.log
	
    #Set Ownership to root:games 
    chown -R root:games $pkgdir/opt/savage
    chmod -R g+w $pkgdir/opt/savage
    
	#Install License
    install -D -m 644 $srcdir/licenses.txt $pkgdir/usr/share/licenses/$pkgname/licenses.txt
    
	#Install Icon
    install -D -m 644 $srcdir/icon.xpm $pkgdir/usr/share/pixmaps/savage.xpm
    
	#Install Desktop File
    install -D -m 644 $srcdir/savage.desktop $pkgdir/usr/share/applications/savage.desktop
    
	#Install Launcher Script
    install -D -m 755 $srcdir/savage.launcher $pkgdir/usr/bin/savage
	

	
}
