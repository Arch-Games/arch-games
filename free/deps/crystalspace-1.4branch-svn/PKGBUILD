# Contributor: Andrea Scarpino <bash.lnx@gmail.com>
# Contributor: Darwin Bautista <djclue917@gmail.com>

pkgname=crystalspace-1.4branch-svn
pkgver=30956
pkgrel=1
pkgdesc="free and portable 3D Game Development Kit written in C++, a specific revision for planeshift-svn"
arch=('i686' 'x86_64')
url="http://www.crystalspace3d.org/"
license=('GPL')
depends=('libjpeg' 'curl' 'libmng' 'libmikmod' 'libvorbis' 'libpng' 'openal' 'freetype2' 'mesa' 'cal3d-svn')
makedepends=('ftjam' 'subversion')
source=()		
md5sums=('')

_svntrunk=https://crystal.svn.sourceforge.net/svnroot/crystal/CS/branches/release/V1.4
_svnmod=crystalspace

build() {

	cd $srcdir
	if [ -d $_svnmod/.svn ]; then
      (cd $_svnmod && svn up -r $pkgver)
    else
      svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
    fi
	
	cd $srcdir/$_svnmod
	./configure --without-java --without-perl --without-python --without-lib3ds --prefix=/usr --sysconfdir=/etc --enable-separate-debug-info=no
	jam -q libs plugins cs-config walktest || return 1
	jam DESTDIR=$pkgdir install

}
