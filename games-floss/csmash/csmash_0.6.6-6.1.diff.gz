--- csmash-0.6.6.orig/BallView.h
+++ csmash-0.6.6/BallView.h
@@ -32,7 +32,7 @@
 
   static GLuint m_number[10];
 private:
-  void BallView::DrawTargetCircle();
+  void DrawTargetCircle();
   GLUquadricObj *m_quad;
 
   void DrawBall();
--- csmash-0.6.6.orig/debian/patches/00list
+++ csmash-0.6.6/debian/patches/00list
@@ -0,0 +1,2 @@
+01_loadparts
+02_gcc4.0
--- csmash-0.6.6.orig/debian/patches/01_loadparts.dpatch
+++ csmash-0.6.6/debian/patches/01_loadparts.dpatch
@@ -0,0 +1,36 @@
+#! /bin/sh -e
+## loadparts.dpatch
+## Bartosz Fenski <fenio@debian.org>
+
+patch_opts="${patch_opts:--f --no-backup-if-mismatch ${2:+-d $2}}"
+
+if [ $# -ne 1 ]; then
+    echo >&2 "`basename $0`: script expects -patch|-unpatch as argument"
+    exit 1
+fi
+case "$1" in
+	-patch) patch $patch_opts -p0 < $0;;
+	-unpatch) patch $patch_opts -R -p0 < $0;;
+	*)
+		echo >&2 "`basename $0`: script expects -patch|-unpatch as argument"
+		exit 1;;
+esac
+ 
+exit 0
+
+@DPATCH@
+--- loadparts.cpp.orig	2003-11-19 17:49:31.000000000 +0100
++++ loadparts.cpp	2004-05-05 12:04:46.000000000 +0200
+@@ -245,7 +245,11 @@
+ 
+ 	while ('\\' == line[l-1]) {
+             // concat next line(s)
++#if (defined __ia64__) || (defined __alpha__) || (defined __s390__) || (defined __x86_64__)
++	    int bufsize = clamp((u_long) 0, sizeof(line)-l, sizeof(line)-1);
++#else
+ 	    int bufsize = clamp(0U, sizeof(line)-l, sizeof(line)-1);
++#endif
+ 	    fgets(&line[l-2], bufsize, fp);
+ 	    if (feof((FILE*)fp)) break;
+ 	    l = strlen(line);
+								     
\ No newline at end of file
--- csmash-0.6.6.orig/debian/patches/02_gcc4.0.dpatch
+++ csmash-0.6.6/debian/patches/02_gcc4.0.dpatch
@@ -0,0 +1,73 @@
+#! /bin/sh -e
+## gcc4.0.dpatch
+## Bartosz Fenski <fenio@debian.org>
+
+patch_opts="${patch_opts:--f --no-backup-if-mismatch ${2:+-d $2}}"
+
+if [ $# -ne 1 ]; then
+    echo >&2 "`basename $0`: script expects -patch|-unpatch as argument"
+    exit 1
+fi
+case "$1" in
+	-patch) patch $patch_opts -p1 < $0;;
+	-unpatch) patch $patch_opts -R -p1 < $0;;
+	*)
+		echo >&2 "`basename $0`: script expects -patch|-unpatch as argument"
+		exit 1;;
+esac
+ 
+exit 0
+
+@DPATCH@
+--- ../tmp-orig/csmash-0.6.6/matrix	2002-03-06 17:46:01.000000000 +0100
++++ ./matrix	2005-01-06 19:43:32.037852232 +0100
+@@ -42,15 +42,6 @@
+ 
+ /* __BEGIN__BEGIN__ */
+ //__NAMESPACE_BEGIN(ese);
+-#if (!defined __GNUG__) || (__GNUC__ == 3)
+-template<typename T>
+-void swap(T& a, T& b)
+-{
+-    T c = a;
+-    a = b;
+-    b = c;
+-}
+-#endif
+ 
+ // matrix_size MUST BE larger than 1
+ template<int matrix_size, typename _float_t = float>
+@@ -174,9 +165,10 @@
+ 		    mx = x;
+ 		}
+ 	    }
+-	    swap(pivot[k], pivot[piv]);
+ 
+ 	    int kk = pivot[k];
++            pivot[k] = pivot[piv];
++            pivot[piv] = kk;
+ 	    float_t t = m[kk][kk];
+ 	    if (0 == t) {
+ 		return 0;
+@@ -222,9 +214,10 @@
+ 		    mx = x;
+ 		}
+ 	    }
+-	    swap(pivot[k], pivot[piv]);
+ 
+ 	    int kk = pivot[kk];
++	    pivot[k] = pivot[piv];
++	    pivot[piv] = kk;
+ 	    double t = a[kk][kk];
+ 	    if (0 == t) {
+ 		return 0;
+@@ -283,7 +276,8 @@
+ 	    }
+ 	    ik = ip[j];
+ 	    if (j != k) {
+-		swap(ip[j], ip[k]);
++		ip[j] = ip[k];
++		ip[k] = ik;
+ 		det = -det;
+ 	    }
+ 	    u = a[ik][k];
--- csmash-0.6.6.orig/debian/README.Debian
+++ csmash-0.6.6/debian/README.Debian
@@ -0,0 +1,7 @@
+Problems with nVidia video cards:
+
+Several users have reported bugs regarding the freezing of X when using
+CannonSmash. This problem is not related to CannonSmash but to the nVidia
+card driver you are using. The suggested solution to that problem is to
+downgrade that driver to version 4191. Thanks to James Stone
+<stone1@btinternet.com> for providing a solution for this issue.
--- csmash-0.6.6.orig/debian/changelog
+++ csmash-0.6.6/debian/changelog
@@ -0,0 +1,193 @@
+csmash (0.6.6-6.1) unstable; urgency=high
+
+  * Non-maintainer upload.
+  * Use (>= ${Source-Version}) as any depending on all (Closes: #354575).
+  * Fix FTBFS with g++4.1 (Closes: #355463).
+  * Put real package alternatives first.
+
+ -- Luk Claes <luk@debian.org>  Fri, 10 Mar 2006 12:32:56 +0100
+
+csmash (0.6.6-6) unstable; urgency=low
+
+  * Rebuilding with uninstalled nvidia-glx (Closes: #291209)
+    Now using Build-Conflicts with it to avoid such situations in the future.
+  * Added patch to fix problems with building on amd64 using gcc-4.0.
+    Thanks to Andreas Jochens for provided patch (Closes: #289015)
+
+ -- Bartosz Fenski <fenio@debian.org>  Thu, 20 Jan 2005 10:21:12 +0100
+
+csmash (0.6.6-5) unstable; urgency=low
+
+  * debian/control:
+    - we're using ${Source-Version} for dependency now
+    - fixed typo in short description of csmash-data
+  * debian/csmash.6
+    - fixed typo
+  * Added debian/watch file.
+  * s/fenio@o2.pl/fenio@debian.org/
+
+ -- Bartosz Fenski <fenio@debian.org>  Sat,  1 Jan 2005 23:24:11 +0100
+
+csmash (0.6.6-4) unstable; urgency=low
+
+  * debian/control:
+    - aded real package alternatives for Build-Depends. (Closes: #249958)
+  * debian/patches/01_loadparts.dpatch:
+    - extended for x86-64 architecture.
+  * Thanks for above suggestions/patches goes to Christopher L Cheney.
+  * Bumped version of manual page (no changes needed).
+
+ -- Bartosz Fenski <fenio@o2.pl>  Fri, 28 May 2004 11:21:15 +0200
+
+csmash (0.6.6-3) unstable; urgency=low
+
+  * New maintainer. (Closes: #228430)
+  * Data files are now separated (csmash-data). (Closes: #233337)
+  * Icon moved to /usr/share/pixmaps/.
+  * Added URL to description.
+  * Patch for loadparts.cpp is now applied by dpatch, thus some changes
+    were made in debian/control and debian/rules.
+  * Removed config.(sub|guess) files (we're now using autotools-dev)
+  * debian/control:
+    - explicitly select *gl* dependencies
+    - added dependency on autotools-dev, thus some changes in rules file too
+  * debian/rules:
+    - extended binary-indep target for csmash-data
+      thanks for Andreas Metzler for pointing it out to me.
+    - some fixes to use `xargs -0r` instead of simple rm
+      thanks to many people from debian-mentors@l.d.o for suggestions.
+
+ -- Bartosz Fenski <fenio@o2.pl>  Mon, 10 May 2004 13:01:11 +0200
+
+csmash (0.6.6-2) unstable; urgency=low
+
+  * Orphanage upload.
+
+ -- Wolfgang Sourdeau <was@debian.org>  Sat, 17 Jan 2004 13:23:32 -0500
+
+csmash (0.6.6-1) unstable; urgency=low
+
+  * New upstream release.
+  * debian/control: Standards-Version set to 3.6.1. No changes.
+  * debian/rules: DH_COMPAT: 3 -> 4.
+
+ -- Wolfgang Sourdeau <was@debian.org>  Mon, 12 Jan 2004 02:39:40 -0500
+
+csmash (0.6.5-2) unstable; urgency=low
+
+  * Build-depends on libglu-dev. (Closes: #193696)
+  * Menu entry put in Games/Sports. (Closes: #193858)
+  * Irrelevant to the csmash package. Put note in README.Debian.
+  (Closes: #122321, #193391)
+  * Added dependency on version >= 4.0.0 of debhelper in control file.
+
+ -- Wolfgang Sourdeau <was@debian.org>  Tue,  3 Jun 2003 09:09:27 -0400
+
+csmash (0.6.5-1) unstable; urgency=low
+
+  * New upstream release.
+  * Rebuilt with indirect dependency (from libsdl-image1.2-dev) on
+    libpng3-dev. (Closes: #168617)
+  * Using updated versions of config.{guess,sub} from
+    ftp://ftp.gnu.org/gnu/config/. Should now build correctly on mipsel
+    (Closes: 168640)
+
+ -- Wolfgang Sourdeau <was@debian.org>  Sat, 28 Dec 2002 15:21:11 -0500
+
+csmash (0.6.4.2-5) unstable; urgency=low
+
+  * Rebuild against a more recent version of libpng. (Closes: #168617)
+
+ -- Wolfgang Sourdeau <was@debian.org>  Mon, 11 Nov 2002 01:39:26 -0500
+
+csmash (0.6.4.2-4) unstable; urgency=low
+
+  * Bug #141921 was encountered for alpha and s390 as well. (Closes: #141921)
+
+ -- Wolfgang Sourdeau <was@debian.org>  Thu, 18 Apr 2002 12:05:31 -0400
+
+csmash (0.6.4.2-3) unstable; urgency=low
+
+  * sizeof() on ia64 returns an unsigned long, so we have to make a cast
+    for the clamp() template to work correctly in loadparts.cpp. (Closes:
+    #141921)
+
+ -- Wolfgang Sourdeau <was@debian.org>  Sun, 14 Apr 2002 19:41:42 -0400
+
+csmash (0.6.4.2-2) unstable; urgency=low
+
+  * Do not build-depend on c++-compiler anymore.
+  * Build-depends on libsdl-image1.2-dev. (Closes: #140841)
+  * Build-depends on xutils (to help configure find the X headers).
+    (Closes: #140651)
+  * Fixed spelling error in description. (Closes: #124525)
+
+ -- Wolfgang Sourdeau <was@debian.org>  Mon,  1 Apr 2002 19:21:31 -0500
+
+csmash (0.6.4.2-1) unstable; urgency=high
+
+  * New Upstream Release.
+  * Important license clash now fixed; debian/copyright updated.
+  * Small update to debian/csmash.6.
+  * Fix compilation problem with g++ 3.0. (Closes: #133914)
+
+ -- Wolfgang Sourdeau <was@debian.org>  Thu,  7 Mar 2002 01:33:32 -0500
+
+csmash (0.6.3-3) unstable; urgency=low
+
+  * Rebuilt with libsdl1.2-debian package. (Closes: #116869)
+
+ -- Wolfgang Sourdeau <was@debian.org>  Thu, 25 Oct 2001 15:31:35 -0400
+
+csmash (0.6.3-2) unstable; urgency=low
+
+  * -1 was built against a home-made 1.2.10-2 version of libgtk1.2.
+
+ -- Wolfgang Sourdeau <was@debian.org>  Thu, 20 Sep 2001 22:40:58 -0400
+
+csmash (0.6.3-1) unstable; urgency=low
+
+  * new upstream release.
+  * fixed path in menu file.
+
+ -- Wolfgang Sourdeau <was@debian.org>  Mon, 17 Sep 2001 03:50:56 -0400
+
+csmash (0.6.2-2) unstable; urgency=low
+
+  * Added a short manpage. (closes: #108381)
+  * Moved /usr/bin/csmash to /usr/games
+
+ -- Wolfgang Sourdeau <was@debian.org>  Thu, 30 Aug 2001 22:28:34 -0400
+
+csmash (0.6.2-1) unstable; urgency=low
+
+  * New upstream release.
+
+ -- Wolfgang Sourdeau <was@debian.org>  Sat, 18 Aug 2001 01:14:21 -0400
+
+csmash (0.6.1-3) unstable; urgency=low
+
+  * removed libstdc++ from Build-depends field in the control
+    file. (closes: #105950)
+
+ -- Wolfgang Sourdeau <was@debian.org>  Thu, 19 Jul 2001 23:33:37 -0400
+
+csmash (0.6.1-2) unstable; urgency=low
+
+  * removed non-portable gcc parameter from configure process. (closes: #97856)
+
+ -- Wolfgang Sourdeau <was@debian.org>  Thu, 17 May 2001 19:23:48 -0400
+
+csmash (0.6.1-1) unstable; urgency=low
+
+  * New upstream release
+  * Converted csmash-icon.xpm to standard menu colourmap
+  * Don't install empty files NEWS and TODO
+
+ -- Wolfgang Sourdeau <was@debian.org>  Wed, 16 May 2001 11:00:30 -0400
+
+csmash (0.6.0-1) unstable; urgency=low
+
+  * Initial release (closes: #96871)
+
+ -- Wolfgang Sourdeau <was@debian.org>  Fri, 11 May 2001 01:22:34 -0400
--- csmash-0.6.6.orig/debian/control
+++ csmash-0.6.6/debian/control
@@ -0,0 +1,38 @@
+Source: csmash
+Section: games
+Priority: optional
+Maintainer: Bartosz Fenski <fenio@debian.org>
+Build-Depends: debhelper (>= 4.0.0), xutils, libjpeg62-dev | libjpeg-dev, zlib1g-dev | libz-dev, xlibmesa-gl-dev | libgl-dev, libglu1-xorg-dev | xlibmesa-glu-dev | libglu-dev, libsdl1.2-dev, libsdl-mixer1.2-dev, libsdl-image1.2-dev, libgtk2.0-dev, libogg-dev, libvorbis-dev, autotools-dev, dpatch
+Build-Conflicts: nvidia-glx
+Standards-Version: 3.6.1
+
+Package: csmash
+Section: games
+Architecture: any
+Depends: ${shlibs:Depends}, csmash-data (>= ${Source-Version})
+Suggests: csmash-demosong
+Description: CannonSmash, a table tennis simulation game
+ CannonSmash is a funny 3D table tennis game. It takes a while to get
+ your hand at ease with the mouse+keyboard manipulations. But once
+ you're used to the technique, you can feel like playing a real game.
+ It is playable against the computer or through a network.
+ .
+ Since csmash relies on OpenGL-compatible rendering, it is best
+ experienced with a 3D accelerator card, although software rendering
+ in wireframe mode should be sustainable.
+ .
+ Homepage: http://cannonsmash.sourceforge.net/
+
+Package: csmash-data
+Architecture: all
+Conflicts: csmash (<< 0.6.6-3)
+Recommends: csmash
+Description: data files for the CannonSmash game
+ CannonSmash is a funny 3D table tennis game. It takes a while to get 
+ your hand at ease with the mouse+keyboard manipulations. But once 
+ you're used to the technique, you can feel like playing a real game. 
+ It is playable against the computer or through a network. 
+ .     
+ This package contains data files for CannonSmash.
+ .
+ Homepage: http://cannonsmash.sourceforge.net/
--- csmash-0.6.6.orig/debian/copyright
+++ csmash-0.6.6/debian/copyright
@@ -0,0 +1,59 @@
+This package was debianized by Bartosz Fenski <fenio@debian.org> on
+Sat, 10 Apr 2004 12:34:30 +0200.
+
+The previous maintainer was Wolfgang Sourdeau <was@debian.org>.
+
+It was downloaded from http://cannonsmash.sourceforge.net/
+
+Copyright:
+
+CannonSmash
+
+Copyright (C) 2000, 2001, 2002, 2003, 2004  Kanna Yoshihiro
+
+The files affine, float, loadparts.cpp, loadparts.h, matrix, parts.cpp,
+parts.h and xerror.cpp are Copyright (C) 2002  ESESoft and distributed
+under the license at the end of this file.
+
+Licensing informations:
+
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+On Debian GNU/Linux systems, the full text of the GNU General Public
+License can be found in the file /usr/share/common-licenses/GPL.
+
+
+The files from ESESoft are distributed under these terms:
+
+Redistribution and use in source and binary forms, with or without
+modification, are permitted provided that the following conditions are
+met:
+
+Redistributions of source code must retain the above copyright notice,
+this list of conditions and the following disclaimer.
+
+Redistributions in binary form must reproduce the above copyright notice,
+this list of conditions and the following disclaimer in the documentation
+and/or other materials provided with the distribution.
+
+The name of the author may not be used to endorse or promote products
+derived from this software without specific prior written permission.
+
+THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
+IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
+IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
+INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
+NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
+DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
+THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
+THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
--- csmash-0.6.6.orig/debian/csmash-data.dirs
+++ csmash-0.6.6/debian/csmash-data.dirs
@@ -0,0 +1 @@
+usr/share/games/csmash
--- csmash-0.6.6.orig/debian/csmash.6
+++ csmash-0.6.6/debian/csmash.6
@@ -0,0 +1,25 @@
+.TH "csmash" "6" "0.6.6" "W. Sourdeau <was@debian.org>" "Games"
+.SH "NAME"
+.LP 
+CannonSmash \- A table tennis simulation game
+.SH "SYNTAX"
+.LP 
+csmash
+.SH "DESCRIPTION"
+.LP 
+This program simulates a competition of table tennis. It can be played against the computer or against another user, through the LAN or the Internet.
+.LP 
+You can move your character by moving the mouse. The ball is thrown by pressing the left mouse button. The target position on your opponent's side is defined by pressing the keyboard keys on the letter pad.
+.LP 
+A 3D graphic card is highly recommended, but the game has a wireframe mode which is playable under software OpenGL rendering (like the Mesa implementation).
+.br 
+.SH "EXAMPLES"
+.LP 
+To run this program the standard way type:
+.LP 
+csmash
+.SH "AUTHORS"
+.LP 
+CannonSmash has been written by Kanna Yoshihiro
+.br 
+This man page was written by Wolfgang Sourdeau <was@debian.org> for the Debian GNU/Linux distribution (but it may be used by others).
--- csmash-0.6.6.orig/debian/csmash.dirs
+++ csmash-0.6.6/debian/csmash.dirs
@@ -0,0 +1,2 @@
+usr/share/pixmaps
+usr/share/games
--- csmash-0.6.6.orig/debian/csmash.docs
+++ csmash-0.6.6/debian/csmash.docs
@@ -0,0 +1,4 @@
+AUTHORS
+CREDITS
+README
+README.en
--- csmash-0.6.6.orig/debian/csmash.menu
+++ csmash-0.6.6/debian/csmash.menu
@@ -0,0 +1,4 @@
+?package(csmash):needs="x11" section="Games/Sports"\
+  title="CannonSmash" command="/usr/games/csmash"\
+  longtitle="CannonSmash - 3D tabletennis game"\
+  icon="/usr/share/pixmaps/csmash.xpm"
--- csmash-0.6.6.orig/debian/csmash.xpm
+++ csmash-0.6.6/debian/csmash.xpm
@@ -0,0 +1,49 @@
+/* XPM */
+static char * csmash_icon_xpm[] = {
+"32 32 14 1",
+" 	c None",
+".	c #7F7F00",
+"+	c #666667",
+"@	c #999999",
+"#	c #B2B2B2",
+"$	c #FF0000",
+"%	c #7F7F7F",
+"&	c #000000",
+"*	c #7F0000",
+"=	c #4C4C4C",
+"-	c #CCCCCC",
+";	c #191919",
+">	c #333333",
+",	c #E5E5E5",
+"             -#@##-             ",
+"          @@..@@@@#@#-          ",
+"        @...%@@@##@#####        ",
+"       .$.@..@@@@#@######       ",
+"      +.@@.%@.@@@@##@#####      ",
+"     $.+.%..@.@@#@#@#######     ",
+"    =.%+.%.@.@@@@@@#@#######    ",
+"   =+$+%.%.%...@@@#@#########   ",
+"  %$.%.+.%.@.@@.@@@#-#########  ",
+"  *++$+@$%.%...@@@#-,-#@@#@#@#  ",
+" %=++...%.%.%@.@.@@#--##@#@#@@# ",
+" .*+$%$+@$%.%.**;&*.#@#@@#@##@@ ",
+" =+++.%..%.+.*&&&&&&+@@@@@@@@@@ ",
+"@=*+$%$++.+%>&&*.+&&*@@@@#@@#@@-",
+"%$.++.+.++.+*&&%.@.%@@.@.@@@@@.#",
+".%$+$%$%$+.%&&;%.%..@.@.@..@.@.#",
+"%$.++.+.%.+.*&&+.%*=+..@.@@.@.@@",
+"@=.$+$+$%$+.=&&*++;&*@.%...@...#",
+"#$%+++.+.++$%*&&&&&&=.@.@.%.%@$-",
+" .$.$+$%$.+.++*;&&>*%.%.%.@..@. ",
+" +%+++++++$%$.%.%.%..$@.%.%%..% ",
+" %.$.$.$+++.%$%$+++%%.++.@$%%$@ ",
+"  +.++++$.$++.+.+$.$@.+.$@..%.  ",
+"  @$.$++++++$+$++.%$%$+.@$+.$@  ",
+"   .%++$.$+++.++$++.+.+$%.+$%   ",
+"    $+.++.$+$.$+++$+$++.$++=    ",
+"     +$.$%++++++$.++++$++=$     ",
+"      +%.$.$+$++==+*++$+*=      ",
+"       +$%+++++$+$+==*+*+       ",
+"        %.$.$++++.*+=+*.        ",
+"          @++$++*+$==.          ",
+"              %.%.@             "};
--- csmash-0.6.6.orig/debian/rules
+++ csmash-0.6.6/debian/rules
@@ -0,0 +1,101 @@
+#!/usr/bin/make -f
+
+package=csmash
+package-data=csmash-data
+
+include /usr/share/dpatch/dpatch.make
+
+#export DH_VERBOSE=1
+export DH_COMPAT=4
+
+DEBIAN_DIR = $(shell pwd)/debian
+
+build: patch-stamp build-stamp
+build-stamp:
+	dh_testdir
+	dh_clean
+
+	cp /usr/share/misc/config.guess /usr/share/misc/config.sub .
+	chmod 755 config.guess config.sub
+	CFLAGS="-O2" \
+	CXXFLAGS="-O2" \
+	LIBS="-lpthread" \
+	./configure 				\
+		--prefix=/usr			\
+		--bindir=/usr/games		\
+		--sysconfdir=/etc		\
+		--infodir=/usr/share/info	\
+		--mandir=/usr/share/man
+
+	$(MAKE)
+
+	touch build-stamp
+
+
+clean: unpatch
+	dh_testdir
+	dh_testroot
+
+	-rm -f build-stamp install-stamp
+	-$(MAKE) distclean
+	-rm -f config.log
+	-rm -f config.guess config.sub
+	-find . -name 'makefile' -print0 | xargs -0r rm -f
+	-find images -name '*.ppm.gz' -print0 | xargs -0r rm -f
+	-find images -name '*.pbm.gz' -print0 | xargs -0r rm -f
+	dh_clean
+
+
+install: install-stamp
+install-stamp: build-stamp
+	dh_testdir
+	dh_testroot
+
+	dh_clean -k
+	dh_installdirs
+	$(MAKE) install 				\
+		prefix=$(DEBIAN_DIR)/$(package)/usr		\
+		bindir=$(DEBIAN_DIR)/$(package)/usr/games	\
+		sysconfdir=$(DEBIAN_DIR)/$(package)/etc		\
+		infodir=$(DEBIAN_DIR)/$(package)/usr/share/info	\
+		mandir=$(DEBIAN_DIR)/$(package)/usr/share/man	\
+		man1dir=$(DEBIAN_DIR)/$(package)/usr/share/man/man1 \
+		datadir=$(DEBIAN_DIR)/$(package-data)/usr/share	\
+		localedir=$(DEBIAN_DIR)/$(package)/usr/share/locale
+	cp debian/csmash.xpm $(DEBIAN_DIR)/$(package)/usr/share/pixmaps/
+	touch install-stamp
+
+
+binary-indep: build install
+	dh_testdir -i
+	dh_testroot -i
+	dh_installdocs -i 
+	dh_installchangelogs -i -pcsmash-data
+	dh_link -i
+	dh_compress -i
+	dh_fixperms -i
+	dh_installdeb -i
+	dh_shlibdeps -i
+	dh_gencontrol -i
+	dh_md5sums -i
+	dh_builddeb -i
+
+binary-arch: build install
+	dh_testdir -a
+	dh_testroot -a
+	dh_installdocs -a
+	dh_installmenu -a
+	dh_installman -a debian/$(package).6
+	dh_installchangelogs -a -pcsmash ChangeLog
+	dh_link -a
+	dh_strip -a
+	dh_compress -a
+	dh_fixperms -a
+	dh_installdeb -a
+	dh_shlibdeps -a
+	dh_gencontrol -a
+	dh_md5sums -a
+	dh_builddeb -a
+
+binary: binary-indep binary-arch
+.PHONY: binary clean binary-indep binary-arch binary install patch unpatch
--- csmash-0.6.6.orig/debian/watch
+++ csmash-0.6.6/debian/watch
@@ -0,0 +1,3 @@
+version=2
+http://prdownloads.sourceforge.net/cannonsmash/csmash-(.*)\.tar\.gz debian uupdate
+
