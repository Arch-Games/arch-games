# $Id: PKGBUILD,v 1.11 2008/03/07 11:26:06 sergej Exp $
# Maintainer: Sergej Pupykin <sergej@aur.archlinux.org>
# Contributor: Joseph <josephmc@sbcglobal.net>

pkgname=glest
pkgver=3.1.2
pkgrel=1
pkgdesc="Cross-platform 3D realtime strategy game"
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/glest"
license=('GPL')
depends=('xerces-c' 'sdl' 'libvorbis' 'openal' 'glest-data' 'mesa')
makedepends=('jam' 'hd2u' 'unzip' 'wxgtk')
source=(http://switch.dl.sf.net/sourceforge/glest/glest-source-$pkgver.tar.bz2 \
	glest \
	glest.sh)
md5sums=('e72ec79dacdf7ff5a27c2f5b74ffc01e' 'd1d9a23f4493c57fed6422df324d5f44' '2588ceaa24a30c6b797d538b2338c0fb')

build() {
  cd $startdir/src/glest-source-$pkgver/
  export CFLAGS="$CFLAGS -I/usr/include/wx-2.8"
  export CXXFLAGS="$CXXFLAGS -I/usr/include/wx-2.8"
  export CPPFLAGS="$CPPFLAGS -I/usr/include/wx-2.8"
  ./configure --with-wx-prefix=/usr
  jam
  install -d $startdir/pkg/opt/glest/bin $startdir/pkg/etc/profile.d || return 1
  install -m755 glest $startdir/pkg/opt/glest && \
  install -m644 glest.ini $startdir/pkg/opt/glest && \
  install -m755 $startdir/src/glest $startdir/pkg/opt/glest/bin && \
  install -m755 $startdir/src/glest.sh $startdir/pkg/etc/profile.d && \
  strip $startdir/pkg/opt/glest/glest
}
