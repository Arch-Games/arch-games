# Contributor: Hussam Al-Tayeb <ht990332@gmail.com>

pkgname=cal3d-svn
pkgver=495
pkgrel=1
pkgdesc="A skeletal-based 3D character animation library"
url="https://gna.org/projects/cal3d"
arch=('i686' 'x86_64')
license=(GPL2)
makedepends=('subversion')
provides=('cal3d')
conflicts=('cal3d')
options=(!libtool)
source=(cal3d.patch)
md5sums=('d2ef9bbc133c0f5cccc55387df12851c')
		 
_svntrunk=svn://svn.gna.org/svn/cal3d/trunk/cal3d
		 
build() {

	$Grabbing the source from svn
	cd $srcdir
	if [ -d $pkgname/.svn ]; then
      (cd $pkgname && svn up -r $pkgver)
    else
      svn co $_svntrunk --config-dir ./ -r $pkgver $pkgname
    fi

	#Patching building and installing the source
	cd $srcdir/$pkgname
	patch -Np0 -i $srcdir/cal3d.patch || return 1
	sed -i 's/AM_USE_UNITTESTCPP/# AM_USE_UNITTESTCPP/' configure.in
	autoreconf --install --force
	./configure --prefix=$pkgdir/usr
	make || return 1
	make install 
  
}
