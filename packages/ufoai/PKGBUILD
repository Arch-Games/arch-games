# Maintainer: Lukas Jirkovsky <l.jirkovsky@gmail.com>
pkgname=ufoai
pkgver=2.3
pkgrel=1
pkgdesc="UFO: Alien Invasion is a strategy game featuring tactical combat"
arch=('i686' 'x86_64')
url="http://ufoai.ninex.info/"
license=('GPL')
depends=('libgl' 'mesa' 'libjpeg' 'libpng' 'curl' 'sdl_image' 'sdl_mixer' 'sdl_ttf' 'xvidcore' 'ufoai-data')
source=(http://downloads.sourceforge.net/project/ufoai/UFO_AI%202.x/$pkgver/ufoai-$pkgver-source.tar.bz2)
md5sums=('9d180ed896a58fe0e514601cd7637dc1')

build() {
  cd "$srcdir"/$pkgname-$pkgver-source

  ./configure --prefix=/usr --enable-release --disable-uforadiant
  make || return 1
  make DESTDIR="$pkgdir" install_exec

  install -D -m644 debian/ufoai.desktop "$pkgdir"/usr/share/applications/ufoai.desktop
  install -D -m644 debian/ufoai-safe.desktop "$pkgdir"/usr/share/applications/ufoai-safe.desktop
  install -D -m644 debian/ufoded.desktop "$pkgdir"/usr/share/applications/ufoded.desktop

  sed -i 's|/usr/games/||' "$pkgdir"/usr/share/applications/*

  install -D -m644 debian/ufoai.xpm "$pkgdir"/usr/share/pixmaps/ufoai.xpm
  install -D -m644 debian/ufoded.xpm "$pkgdir"/usr/share/pixmaps/ufoded.xpm
}
