# Contributor: Andrea Scarpino <bash.lnx@gmail.com>
# Contributor: Darwin Bautista <djclue917@gmail.com>

pkgname=crystalspace-1.4branch-svn
pkgver=30956
pkgrel=1
pkgdesc="free and portable 3D Game Development Kit written in C++, a specific revision for planeshift-svn"
url="http://www.crystalspace3d.org/"
arch=('i686' 'x86_64')
license=('GPL')
depends=('libjpeg' 'curl' 'libmng' 'libmikmod' 'libvorbis' 'libpng' 'openal' 'freetype2' 'mesa' 'cal3d-svn')
makedepends=('ftjam' 'subversion')
conflicts=('crystalspace')
source=()		
md5sums=('')

_svntrunk=https://crystal.svn.sourceforge.net/svnroot/crystal/CS/branches/release/V1.4

build() {

	#Grab the source from svn
	cd $srcdir
	if [ -d $pkgname/.svn ]; then
      (cd $pkgname && svn up -r $pkgver)
    else
      svn co $_svntrunk --config-dir ./ -r $pkgver $pkgname
    fi
	
	#Build and install the package
	cd $srcdir/$pkgname
	./configure --without-java --without-perl --without-python --without-lib3ds --prefix=/usr --sysconfdir=/etc --enable-separate-debug-info=no
	jam -q libs plugins cs-config walktest || return 1
	jam DESTDIR=$pkgdir install

}
