# Contributor: Thomas Kinnen <thomas.kinnen@gmail.com>
pkgname=fife-svn
provides="fife"
conflicts="fife"
pkgdesc="The mission of the FIFE project is to create a cross platform game creation framework"
url="http://www.fifengine.de/"
pkgver=2996
pkgrel=1
arch=('i686' 'x86_64')
license=('LGPL')
depends=('sdl' 'boost' 'sdl_ttf' 'sdl_image' 'libvorbis' 'libogg' 'openal' 'guichan' 'swig' 'python' 'zlib' 'libgl' 'libpng')
makedepends=('scons' 'subversion')
_svntrunk="http://fife.svn.cvsdude.com/engine/trunk"
_svnmod="fife"
source=()
md5sums=()
build() {
	cd $srcdir
	if [ -d ./$_svnmod ]; then
		cd fife
		svn up
	else
		svn co $_svntrunk $_svnmod
	fi
	cd $srcdir/$_svnmod
	
	sed -i 's/openal_soft/openal/g' build/linux2-config-dist.py
	scons prefix=$pkgdir/usr debug=0 log=0 opengl=1 || return 1
	mkdir -p $pkgdir/usr/lib/python2.6/site-packages/
	cp -r engine/extensions/* $pkgdir/usr/lib/python2.6/site-packages/
	cp engine/swigwrappers/python/{_fife.so,fife.py} $pkgdir/usr/lib/python2.6/site-packages/
	find $pkgbuild -depth -type d -name ".svn" -exec rm -rf {} \;
}
